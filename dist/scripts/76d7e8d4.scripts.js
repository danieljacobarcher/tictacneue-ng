"use strict";angular.module("newTicApp",["firebase"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"GameCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("newTicApp").controller("GameCtrl",["$scope","angularFire",function(a,b){a.games=[],a.queue={};var c=new Firebase("https://tictacneue.firebaseio.com/games");b(c,a,"games").then(function(){var c=new Firebase("https://tictacneue.firebaseio.com/queue");b(c,a,"queue").then(function(){if(void 0==a.queue.gameId){a.player="p1";var b={board:[[{value:" "},{value:" "},{value:" "}],[{value:" "},{value:" "},{value:" "}],[{value:" "},{value:" "},{value:" "}]],alreadyWon:!1,turn:1,playedCells:0,winorlose:null,iTurn:1};a.gameId=a.games.push(b)-1,a.queue.gameId=a.gameId}else a.player="p2",a.gameId=a.queue.gameId,a.queue={}})}),a.bttns=[{label:"Start Game ›",id:"startgame"},{label:"Choose X ›",id:"playr1"},{label:"Choose O ›",id:"playr2"},{label:"Play Again ›",id:"playagainbtn"}],a.setPlayr=function(){"p1"==a.player?a.section(2):"p2"==a.player&&a.section(3)},a.playBall=function(b){a.games[a.gameId].turn=b,a.section(3)},a.setX=function(b){a.games[a.gameId].turn++,a.games[a.gameId].playedCells++,b.value="X"},a.setO=function(b){a.games[a.gameId].turn++,a.games[a.gameId].playedCells++,b.value="O"},a.playCell=function(b){if(0==a.games[a.gameId].alreadyWon&&"X"!=b.value&&"O"!=b.value){"p1"==a.player&&1==a.games[a.gameId].iTurn?0!=a.games[a.gameId].turn%2?(alert(a.player+" if "+a.games[a.gameId].turn),a.games[a.gameId].iTurn=2,a.setX(b)):0==a.games[a.gameId].turn%2&&(alert(a.player+" else "+a.games[a.gameId].turn),a.games[a.gameId].iTurn=2,a.setO(b)):"p2"==a.player&&2==a.games[a.gameId].iTurn&&(0==a.games[a.gameId].turn%2?(alert(a.player+" if2 "+a.games[a.gameId].turn),a.games[a.gameId].iTurn=1,a.setX(b)):0!=a.games[a.gameId].turn%2&&(alert(a.player+" else2 "+a.games[a.gameId].turn),a.games[a.gameId].iTurn=1,a.setO(b)));for(var c=0;2>=c;++c)b.value==a.games[a.gameId].board[0][c].value&&b.value==a.games[a.gameId].board[1][c].value&&b.value==a.games[a.gameId].board[2][c].value&&null!=b.value&&(a.games[a.gameId].alreadyWon=!0),b.value==a.games[a.gameId].board[c][0].value&&b.value==a.games[a.gameId].board[c][1].value&&b.value==a.games[a.gameId].board[c][2].value&&null!=b.value&&(a.games[a.gameId].alreadyWon=!0);b.value==a.games[a.gameId].board[2][0].value&&b.value==a.games[a.gameId].board[1][1].value&&b.value==a.games[a.gameId].board[0][2].value&&null!=b.value&&(a.games[a.gameId].alreadyWon=!0),b.value==a.games[a.gameId].board[0][0].value&&b.value==a.games[a.gameId].board[1][1].value&&b.value==a.games[a.gameId].board[2][2].value&&null!=b.value&&(a.games[a.gameId].alreadyWon=!0)}else console.log("Nice try, punk")};var d=1;a.section=function(a){d=a},a.is=function(a){return d==a},a.resetGame=function(){for(var b=0;b<=a.games[a.gameId].board.length-1;b++)for(var c=0;c<=a.games[a.gameId].board.length-1;c++)a.games[a.gameId].board[b][c].value=" ";a.section(2),a.games[a.gameId].turn=0,a.games[a.gameId].playedCells=0,a.games[a.gameId].alreadyWon=!1}}]);